<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MediaAI | Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-auth.js"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Tajawal:wght@400;700&display=swap');
        body { font-family: 'Tajawal', sans-serif; }
        .glass-card { background: rgba(24, 24, 27, 0.8); backdrop-filter: blur(12px); }
    </style>
</head>
<body class="bg-black text-white min-h-screen">

    <nav class="p-5 border-b border-zinc-800 flex justify-between items-center glass-card sticky top-0 z-50">
        <div class="flex items-center gap-2">
            <div class="w-3 h-3 bg-blue-500 rounded-full animate-pulse"></div>
            <h2 class="text-xl font-bold bg-gradient-to-l from-blue-400 to-blue-600 bg-clip-text text-transparent">MediaAI</h2>
        </div>
        <button onclick="logout()" class="px-5 py-2 bg-red-950/30 text-red-500 border border-red-900/50 rounded-2xl text-sm font-bold hover:bg-red-900/20 transition-all">ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬</button>
    </nav>

    <main class="max-w-4xl mx-auto p-6 mt-8">
        <div class="bg-zinc-900/50 p-8 rounded-[2.5rem] border border-zinc-800 shadow-2xl relative overflow-hidden">
            <div class="absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-transparent via-blue-500 to-transparent opacity-30"></div>
            
            <h1 class="text-2xl font-bold mb-8 flex items-center gap-3">
                <span class="text-3xl">ğŸ¤–</span> Ø§Ø³Ø£Ù„ Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ
            </h1>
            
            <textarea id="userInput" rows="4" 
                class="w-full p-6 rounded-3xl bg-black border border-zinc-800 mb-6 text-right focus:border-blue-500 outline-none transition-all text-lg placeholder-zinc-600 shadow-inner" 
                placeholder="Ø§ÙƒØªØ¨ ÙÙƒØ±ØªÙƒ Ù‡Ù†Ø§ (Ù…Ø«Ø§Ù„: Ø®Ø·Ø© Ù…Ø­ØªÙˆÙ‰ ØªÙŠÙƒ ØªÙˆÙƒ Ù„Ø¹Ø·Ø±)..."></textarea>
            
            <button id="genBtn" onclick="askGemini()" 
                class="w-full py-5 bg-blue-600 rounded-3xl font-bold text-lg shadow-lg shadow-blue-900/20 hover:bg-blue-700 hover:scale-[1.01] active:scale-95 transition-all">
                ØªÙˆÙ„ÙŠØ¯ Ø§Ù„Ù…Ø­ØªÙˆÙ‰ âœ¨
            </button>
            
            <div id="resultBox" class="mt-10 p-8 bg-zinc-950 rounded-[2rem] border border-zinc-800 hidden relative group">
                <div class="flex justify-between items-center mb-4">
                    <span class="text-blue-500 text-xs font-bold tracking-widest uppercase">Ø§Ù„Ø±Ø¯ Ø§Ù„Ø°ÙƒÙŠ</span>
                    <button onclick="copyText()" class="text-zinc-500 hover:text-white text-xs transition">Ù†Ø³Ø® Ø§Ù„Ù†Øµ ğŸ“‹</button>
                </div>
                <div id="aiResponse" class="text-zinc-300 leading-relaxed text-right text-lg whitespace-pre-wrap"></div>
            </div>
        </div>
    </main>

    <script>
        // Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Firebase
        const firebaseConfig = {
            apiKey: "AIzaSyD0qsSRI5c8oNjWZMupSe59sQ5OsYr4MUE",
            authDomain: "mymediaai.firebaseapp.com",
            projectId: "mymediaai",
            appId: "1:1052949171163:web:ba0bd6e2ef11a6c32e35fe"
        };
        if (!firebase.apps.length) { firebase.initializeApp(firebaseConfig); }

        // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ø¬Ù„Ø³Ø©
        firebase.auth().onAuthStateChanged(user => {
            if (!user) window.location.href = "login.html";
        });

        function logout() {
            firebase.auth().signOut().then(() => window.location.href = 'login.html');
        }

        async function askGemini() {
            const input = document.getElementById('userInput').value;
            const btn = document.getElementById('genBtn');
            const output = document.getElementById('aiResponse');
            const box = document.getElementById('resultBox');
            
            // Ø§Ù„Ù…ÙØªØ§Ø­ Ø§Ù„Ø¬Ø¯ÙŠØ¯ Ø§Ù„Ø°ÙŠ Ø§Ø³ØªØ®Ø±Ø¬ØªÙ‡
            const KEY = "AIzaSyCuJWJ3QOnwIW5yFFYrkYP-3zJomhB74Uw";

            if(!input) return;

            btn.disabled = true;
            btn.innerText = "â³ Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªÙˆÙ„ÙŠØ¯...";
            box.classList.remove('hidden');
            output.innerText = "Ø¬Ø§Ø±ÙŠ Ù…Ø¹Ø§Ù„Ø¬Ø© Ø·Ù„Ø¨Ùƒ...";

            try {
                const response = await fetch(`https://generativelanguage.googleapis.com/v1beta/models/gemini-1.5-flash:generateContent?key=${KEY}`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ contents: [{ parts: [{ text: input }] }] })
                });

                const data = await response.json();

                if (data.candidates) {
                    output.innerText = data.candidates[0].content.parts[0].text;
                } else {
                    output.innerHTML = `<span class="text-red-400 italic">Ø¹Ø°Ø±Ø§Ù‹ØŒ Ø§Ù„Ù…Ø­Ø±Ùƒ ØªØ­Øª Ø§Ù„ØµÙŠØ§Ù†Ø© Ø­Ø§Ù„ÙŠØ§Ù‹.</span>`;
                }
            } catch (e) {
                output.innerText = "ÙØ´Ù„ ÙÙŠ Ø§Ù„Ø§ØªØµØ§Ù„ØŒ ØªØ£ÙƒØ¯ Ù…Ù† Ø§Ù„Ø´Ø¨ÙƒØ©.";
            } finally {
                btn.disabled = false;
                btn.innerText = "ØªÙˆÙ„ÙŠØ¯ Ø§Ù„Ù…Ø­ØªÙˆÙ‰ âœ¨";
            }
        }

        function copyText() {
            const text = document.getElementById('aiResponse').innerText;
            navigator.clipboard.writeText(text);
            alert("ØªÙ… Ù†Ø³Ø® Ø§Ù„Ù†Øµ Ø¨Ù†Ø¬Ø§Ø­!");
        }
    </script>
</body>
</html>
